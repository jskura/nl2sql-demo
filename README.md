# NL2SQL Agent Demo

This project demonstrates a progressive approach to converting natural language questions into SQL queries using AI. It showcases three different modes of operation, each with increasing levels of sophistication.

## Overview

The NL2SQL Agent Demo is a full-stack application that allows users to:
- Select a database table
- Ask questions in natural language
- Get SQL queries generated by AI
- Execute the queries and see results

## Features

### Three Modes of Operation

1. **Basic Mode**
   - Uses only the table schema for context
   - Performs a one-shot generation of SQL
   - Simple and fast approach

2. **Enhanced Mode**
   - Uses a LangGraph agent
   - Takes the schema, generates SQL, evaluates it, and corrects if needed
   - Multi-step process with self-evaluation

3. **Advanced Mode**
   - Analyzes previous queries and suggests the best one to adapt
   - Runs multiple approaches in parallel threads
   - Selects the optimal result based on evaluation

## Architecture

The application consists of:

- **Frontend**: React application with Material UI
- **Backend**: FastAPI server with the following components:
  - NL2SQL Service: Handles the conversion of natural language to SQL
  - BigQuery Service: Manages database connections and query execution
  - Agent Tools: Provides additional functionality for the advanced mode

## Technologies Used

- **Frontend**: React, Material UI, React Router
- **Backend**: FastAPI, Pydantic, Uvicorn
- **AI/ML**: Google Vertex AI, LangChain, LangGraph
- **Database**: Google BigQuery

## Getting Started

### Prerequisites

- Python 3.9+
- Node.js 14+
- Google Cloud account with Vertex AI and BigQuery enabled

### Installation

1. Clone the repository:
   ```
   git clone https://github.com/yourusername/nl2sql-agent.git
   cd nl2sql-agent
   ```

2. Set up the backend:
   ```
   cd backend
   python -m venv venv
   source venv/bin/activate  # On Windows: venv\Scripts\activate
   pip install -r requirements.txt
   ```

3. Set up the frontend:
   ```
   cd ../frontend
   npm install
   ```

4. Configure environment variables:
   - Create a `.env` file in the backend directory
   - Add your Google Cloud credentials and configuration

### Running the Application

1. Start the backend server:
   ```
   cd backend
   source venv/bin/activate  # On Windows: venv\Scripts\activate
   uvicorn app.main:app --reload
   ```

2. Start the frontend development server:
   ```
   cd frontend
   npm start
   ```

3. Open your browser and navigate to `http://localhost:3000`

## Usage

1. Select a demo mode (Basic, Enhanced, or Advanced)
2. Choose a table from the dropdown
3. Enter a natural language question
4. View the generated SQL and explanation
5. Execute the query to see results

## License

This project is licensed under the MIT License - see the LICENSE file for details. 